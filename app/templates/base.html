<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Payroll Scheduler{% endblock %}</title>
    <link rel="stylesheet" href="/static/css/styles.css">
</head>
<body>
<div class="layout">
    <!-- Mobile hamburger menu button -->
    <button class="mobile-menu-toggle" id="mobileMenuToggle" aria-label="Toggle menu">
        <span></span>
        <span></span>
        <span></span>
    </button>
    
    <!-- Mobile menu overlay -->
    <div class="mobile-menu-overlay" id="mobileMenuOverlay"></div>
    
    <aside class="sidebar" id="sidebar">
        <div class="brand">PAYROLL DESK</div>
        <nav class="nav-links">
            {% set path = request.url.path %}
            <a class="nav-link {% if path == '/' or path.startswith('/dashboard') %}active{% endif %}" href="/dashboard">Dashboard</a>
            <a class="nav-link {% if path.startswith('/models') %}active{% endif %}" href="/models">Models</a>
            <a class="nav-link {% if path.startswith('/schedules') %}active{% endif %}" href="/schedules">Schedules</a>
            <hr style="margin: 15px 0; border: none; border-top: 1px solid #555;">
            {% if user %}
            <a class="nav-link {% if path.startswith('/profile') %}active{% endif %}" href="/profile">ðŸ‘¤ Profile</a>
            {% if user.is_admin() %}
            <a class="nav-link {% if path.startswith('/admin') %}active{% endif %}" href="/admin/users">ðŸ‘¥ Users (Admin)</a>
            {% endif %}
            <a class="nav-link" href="/logout" style="color: #ff6b6b; margin-top: 15px;">ðŸšª Logout</a>
            {% endif %}
        </nav>
    </aside>
    <main class="content">
        {% block content %}{% endblock %}
    </main>
</div>

<script>
    // Mobile menu toggle functionality
    const menuToggle = document.getElementById('mobileMenuToggle');
    const sidebar = document.getElementById('sidebar');
    const overlay = document.getElementById('mobileMenuOverlay');
    
    function closeMenu() {
        sidebar.classList.remove('active');
        overlay.classList.remove('active');
        menuToggle.classList.remove('active');
    }
    
    function toggleMenu() {
        sidebar.classList.toggle('active');
        overlay.classList.toggle('active');
        menuToggle.classList.toggle('active');
    }
    
    // Toggle menu on button click
    menuToggle.addEventListener('click', toggleMenu);
    
    // Close menu on overlay click
    overlay.addEventListener('click', closeMenu);
    
    // Close menu when clicking on a nav link
    document.querySelectorAll('.nav-link').forEach(link => {
        link.addEventListener('click', closeMenu);
    });
</script>
</body>
</html>
